import numpy as np
import pandas as pd
from model import Model

model = Model('VL')
model.preprocess_data()

model.train_test_known_data()

model.train(model.df_features)

# These are testers pulled from the data. Not how data will be input by a user.
test_packs = [['88', '66', '40', '6'],['66', '40', '36', '6'],['66', '10', '6', '40'],['66', '40', '519', '6'],['116', '66', '40', '6'],
            ['66', '154', '6', '40'],['22', '66', '40', '6'],['66', '36', '519', '6'],['116', '66', '154', '6'],
            ['22', '66', '154', '6'],['66', '27', '36', '40'],['66', '40', '36', '603'],['36', '66', '40', '519'],
            ['66', '40', '36', '711'],['66', '27', '519', '40'],['66', '40', '711', '603'],['116', '66', '154', '40'],
            ['22', '66', '154', '40'],['36', '66', '27', '519'],['66', '36', '711', '603'],['116', '40', '137', '100'],
            ['116', '36', '137', '100'],['116', '22', '36', '100'],['40', '36', '137', '6'],['40', '36', '519', '6'],
            ['116', '40', '36', '6'],['116', '40', '137', '6'],['40', '222', '137', '6'],['116', '40', '154', '6'],
            ['116', '40', '222', '6'],['22', '154', '6', '40'],['116', '36', '137', '6'],['116', '222', '137', '6'],
            ['16', '711', '603', '6'],['88', '40', '10', '603'],['88', '40', '10', '33'],['88', '40', '10', '154'],
            ['88', '40', '10', '721'],['88', '40', '721', '603'],['88', '40', '154', '33'],['40', '10', '603', '43'],
            ['116', '40', '36', '137'],['36', '40', '27', '519'],['40', '36', '711', '603'],['116', '40', '222', '137'],
            ['40', '10', '721', '603'],['40', '10', '33', '154'],['88', '10', '603', '43'],['88', '10', '154', '43'],
            ['88', '22', '10', '43'],['88', '22', '603', '43'],['88', '22', '10', '603'],['88', '10', '721', '603'],
            ['88', '10', '154', '33'],['88', '10', '721', '800'],['22', '10', '603', '43']]
y_act = [np.float64(6.2), np.float64(0.6666666666666666), np.float64(1.0), np.float64(6.333333333333333), np.float64(-0.6666666666666666), np.float64(-1.3333333333333333), np.float64(-1.3333333333333333), np.float64(0.25), np.float64(-1.3333333333333333), np.float64(-4.0), np.float64(2.6666666666666665), np.float64(7.333333333333333), np.float64(4.5), np.float64(7.333333333333333), np.float64(6.5), np.float64(-1.6666666666666667), np.float64(0.3333333333333333), np.float64(2.6666666666666665), np.float64(6.428571428571429), np.float64(1.3333333333333333), np.float64(-0.25), np.float64(3.3333333333333335), np.float64(1.75), np.float64(-0.75), np.float64(4.25), np.float64(-1.0), np.float64(0.3333333333333333), np.float64(2.5), np.float64(6.4), np.float64(6.0), np.float64(0.0), np.float64(0.0), np.float64(0.0), np.float64(-1.0), np.float64(-1.25), np.float64(5.0), np.float64(-0.14285714285714285), np.float64(0.0), np.float64(-8.0), np.float64(-3.142857142857143), np.float64(-2.6666666666666665), np.float64(-1.2857142857142858), np.float64(1.0), np.float64(-3.75), np.float64(-2.6666666666666665), np.float64(-2.0), np.float64(-2.0), np.float64(-4.666666666666667), np.float64(-2.3333333333333335), np.float64(4.0), np.float64(1.3333333333333333), np.float64(5.625), np.float64(5.125), np.float64(4.714285714285714), np.float64(-4.8), np.float64(4.25), np.float64(8.0), np.float64(6.125), np.float64(6.333333333333333), np.float64(-2.6666666666666665), np.float64(-1.75), np.float64(-4.75), np.float64(1.5), np.float64(1.8), np.float64(0.6), np.float64(-4.8), np.float64(2.3333333333333335), np.float64(2.0), np.float64(5.5), np.float64(2.0), np.float64(8.0), np.float64(4.0), np.float64(4.0), np.float64(4.3), np.float64(4.0), np.float64(0.0), np.float64(4.714285714285714), np.float64(9.5), np.float64(4.0)]

# Create test dataframe
df_test = pd.DataFrame([[0]*len(model.X_columns)]*len(test_packs), columns=model.X_columns)
i = -1
for pack in test_packs:
    i += 1
    df_test.loc[[i],[model.y_label]] = y_act[i] 
    for skater in pack:
        df_test.loc[[i],[skater]] = 1

for col in model.X_features:
    df_test[col] = model.df_features[col].mean()

model.test(df_test)